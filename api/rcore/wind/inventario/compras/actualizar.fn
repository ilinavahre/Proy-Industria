
(sentinel::privilege-required "Administrador, Inventario, Compras")

(shield::validate
    (shield::field id
        required true
        pattern integer
        check:record_not_found (isnotnull (db::scalar `SELECT purchase_id FROM ##purchases WHERE is_active=1 AND purchase_id={$}`))
    )
)

(shield::validate input

    (shield::field status
        required false
        pattern integer
    )
)

(db::update "##purchases" (& purchase_id (id)) (input))



(&)
