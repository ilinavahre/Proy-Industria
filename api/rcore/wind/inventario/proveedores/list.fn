
(sentinel::privilege-required "Administrador, Inventario")

(call "@filters")
(call "pagination")

(set list (db::table `
    SELECT
        x.supplier_id id,
        x.created,
        x.is_visible,

        x.name,
        x.city,
        x.state,
        x.email,
        x.phone

    FROM ##suppliers x

    WHERE {filters}

    ORDER BY {sort} {order}
    LIMIT {offset}, {count}
`))

(for i (list)
    (set i.s_created (locale::datetime (i.created)))
)
